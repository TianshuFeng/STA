<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Shiny app instruction • STA</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Shiny app instruction">
<meta property="og:description" content="STA">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">STA</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">1.22</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fas fa fas fa-home fa-lg"></span>

  </a>
</li>
<li>
  <a href="../articles/STA.html">Get started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles

    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/Shiny_app_instruction.html">Shiny app instruction</a>
    </li>
  </ul>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/TianshuFeng/STA/">
    <span class="fab fa fab fa-github fa-lg"></span>

  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->



      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Shiny app instruction</h1>
                        <h4 class="author">Tianshu Feng</h4>

            <h4 class="date">4/20/2020</h4>

      <small class="dont-index">Source: <a href="https://github.com/TianshuFeng/STA/blob/master/Shiny_app_instruction.Rmd"><code>Shiny_app_instruction.Rmd</code></a></small>
      <div class="hidden name"><code>Shiny_app_instruction.Rmd</code></div>

    </div>



<p>This page introduces the <strong><a href="http://tsfeng.shinyapps.io/STA-app">Shiny app</a></strong> designed to interactively analysis results from the <code>mapper.kmeans</code> function of package STA.</p>
<div id="section-interface" class="section level2">
<h2 class="hasAnchor">
<a href="#section-interface" class="anchor"></a>Interface</h2>
<p>This app includes a sidebar for input/output and settings, and a main panel for result display. An overview of the user interface of the shiny app is shown below:</p>
<table class="table">
<thead><tr class="header">
<th align="center"><img src="figures/main_screen.png" alt="Interface"></th>
</tr></thead>
<tbody><tr class="odd">
<td align="center"><em>User interface of the shiny app.</em></td>
</tr></tbody>
</table>
</div>
<div id="section-input" class="section level2">
<h2 class="hasAnchor">
<a href="#section-input" class="anchor"></a>Input</h2>
<p>The app accept .h5 file from function <code>save_network_h5</code>. The first argument of the function is for the object <code>TDAMapper</code> from <code>mapper.kmeans</code>; and the second, optional argument allows users to save the dataset used in the analysis. Note that the order of samples in the dataset should be the same as that used in <code>mapper.kmeans</code>, and rows represent the samples. The third argument decides the name and path of the .h5 file and should end with ‘.h5’.</p>
<p>The following example code applies the STA method to the chicken foot data and generate a .h5 file based on the result.</p>
<div class="sourceCode" id="section-cb1"><pre class="downlit">
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://tianshufeng.github.io/STA/">STA</a></span><span class="op">)</span>

<span class="va">simu_data</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/chicken_generator.html">chicken_generator</a></span><span class="op">(</span>seed <span class="op">=</span> <span class="fl">1</span><span class="op">)</span>
<span class="va">simu_data_mapper</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/mapper.kmeans.html">mapper.kmeans</a></span><span class="op">(</span>dat <span class="op">=</span> <span class="va">simu_data</span><span class="op">[</span>,<span class="fl">2</span><span class="op">:</span><span class="fl">4</span><span class="op">]</span>,
                               filter_values <span class="op">=</span> <span class="va">simu_data</span><span class="op">$</span><span class="va">Y</span>,
                               num_intervals <span class="op">=</span> <span class="fl">10</span>,
                               percent_overlap <span class="op">=</span> <span class="fl">70</span><span class="op">)</span>

<span class="fu"><a href="../reference/save_network_h5.html">save_network_h5</a></span><span class="op">(</span>obj_mapper <span class="op">=</span> <span class="va">simu_data_mapper</span>,
                dataset <span class="op">=</span> <span class="va">simu_data</span>,
                file <span class="op">=</span> <span class="st">"simu.h5"</span><span class="op">)</span></pre></div>
<p>After loading the .h5 file, the app will automatically generate the network based on the <code>obj_mapper</code> object saved in the .h5 file.</p>
<table class="table">
<thead><tr class="header">
<th align="center"><img src="figures/open_h5.png" alt="Input"></th>
</tr></thead>
<tbody><tr class="odd">
<td align="center"><em>.h5 file input.</em></td>
</tr></tbody>
</table>
<p>Then, if the dataset is provided in the .h5 file with <code>save_network_h5</code>, users can choose either a categorical or continuous variable under the categorical/continuous tab to color the network.</p>
<p>Furthermore, the app accepts an additional descriptive .csv file containing additional features of the samples. Note that the order of samples in the description csv file should follow the same order as data used to generate the network. The first row of the descriptive file is always treated as header. Character variables in the file will be treated as <code>factor</code>s.</p>
</div>
<div id="section-data-visualization-and-analysis" class="section level2">
<h2 class="hasAnchor">
<a href="#section-data-visualization-and-analysis" class="anchor"></a>Data visualization and analysis</h2>
<div id="section-categorical-variable" class="section level3">
<h3 class="hasAnchor">
<a href="#section-categorical-variable" class="anchor"></a>Categorical variable</h3>
<p>If we select a categorical variable under the “Categorical” tab, the Shiny app will color the nodes based on the majority of categories within each node. For example, if we choose ‘Group’ in the above example, the network will look like:</p>
<table class="table">
<thead><tr class="header">
<th align="center"><img src="vignetes/figures/categorical_color.png" alt="cate_color"></th>
</tr></thead>
<tbody><tr class="odd">
<td align="center"><em>Categorical data analysis.</em></td>
</tr></tbody>
</table>
<p>Alternatively, we can mix the colors of samples within each node by selecting the “color mixer” option. It will lead to:</p>
<table class="table">
<thead><tr class="header">
<th align="center"><img src="figures/color_mixer.png" alt="color_mixer"></th>
</tr></thead>
<tbody><tr class="odd">
<td align="center"><em>Color mixer.</em></td>
</tr></tbody>
</table>
<p>Clicking on the nodes in the shiny app will lead to a node summary shown below the network. Currently, for categorical variables, the summary of a node includes a frequency table and a pie chart based on the categories of the samples within the node. For example,</p>
<table class="table">
<thead><tr class="header">
<th align="center"><img src="figures/Node_summary.png" alt="node_sum"></th>
</tr></thead>
<tbody><tr class="odd">
<td align="center"><em>Node summary for categorical variables.</em></td>
</tr></tbody>
</table>
</div>
<div id="section-continuous-variable" class="section level3">
<h3 class="hasAnchor">
<a href="#section-continuous-variable" class="anchor"></a>Continuous variable</h3>
<p>Similarly, we can select a continuous variable under the “Continuous” tab, and the Shiny app will color the nodes based on the average values of samples w.r.t. the varible. For example, if we choose ‘Y’-axis in the above example, the app will look like:</p>
<table class="table">
<thead><tr class="header">
<th align="center"><img src="figures/continuous_color.png" alt="conti_color"></th>
</tr></thead>
<tbody><tr class="odd">
<td align="center"><em>Continuous data analysis.</em></td>
</tr></tbody>
</table>
<p>Clicking on the nodes in the shiny app will lead to a node summary shown below the network. Currently, for continuous variables, the summary of a node includes a violin plot, a table of quantiles and a test for Spearman’s <span class="math inline">\(\rho\)</span>. Here, the correlation is between the average values of the selected continuous variable of the nodes, and the minimum distance to the seleted node from other nodes.</p>
<p>For example,</p>
<table class="table">
<thead><tr class="header">
<th align="center"><img src="figures/node_summary_continuous.png" alt="node_sum_conti"></th>
</tr></thead>
<tbody><tr class="odd">
<td align="center"><em>Node summary for continuous variables. </em></td>
</tr></tbody>
</table>
</div>
<div id="section-node-comparison" class="section level3">
<h3 class="hasAnchor">
<a href="#section-node-comparison" class="anchor"></a>Node comparison</h3>
<p>Checking the “Node comparison” will enable the app to compare consecutively selected nodes. For example:</p>
<table class="table">
<thead><tr class="header">
<th align="center"><img src="figures/node_comparison.png" alt="node_compare"></th>
</tr></thead>
<tbody><tr class="odd">
<td align="center"><em>Node comparison. </em></td>
</tr></tbody>
</table>
<p>For categorical variables, the comparison is conducted with <span class="math inline">\(\chi\)</span>^2 test. For continuous variables, we use violin plot and KS test.</p>
</div>
</div>
<div id="section-customization" class="section level2">
<h2 class="hasAnchor">
<a href="#section-customization" class="anchor"></a>Customization</h2>
<p>Two options are provided to customize the network visualization.</p>
<table class="table">
<thead><tr class="header">
<th align="center"><img src="figures/settings.png" alt="node_custom"></th>
</tr></thead>
<tbody><tr class="odd">
<td align="center"><em>Network customization. </em></td>
</tr></tbody>
</table>
<p>The first option allows to choose a color palette to color the nodes. The second option is to set the depth of nearest nodes to be highlighted if a node is seleted.</p>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p>Developed by Tianshu Feng, Chen Wang.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
</div>




  </body>
</html>
